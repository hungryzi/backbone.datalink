// Generated by CoffeeScript 1.3.1
/*
Backbone DataLink Library v0.3
Copyright 2012, Pascal Hartig
Dual licensed under the MIT or GPL Version 3 licenses.
*/(function(a,b){return typeof exports!="undefined"?b(a,exports,require("synapse"),require("underscore")):typeof define=="function"&&define.amd?define("datalink",["synapse","underscore","exports"],function(c,d,e){return b(a,e,c,d)}):a.DataLink=b(a,{},a.Synapse)})(this,function(a,b,c,d){var e;return d||(d=window._),e=function(a){if(a.model==null)throw new Error("View "+a.toString()+" must be bound to a model!")},d.extend(b,{version:"0.2",defaultOptions:{bind:"syncWith",attribute:"data-bind",ignoreEmpty:!1,prefill:!0,triggerOnBind:!1},_getLocalOptions:function(a,b,c){var e,f,g,h,i;e=d.defaults(b||{},this.defaultOptions),g={};for(h=0,i=a.length;h<i;h++)f=a[h],g[f]=d.defaults((c!=null?c[f]:void 0)||{},e);return g},linkView:function(a,b,d,f){var g,h,i,j,k,l,m,n,o,p,q,r,s;n=this._getLocalOptions(b,d,f),e(a),o=new c(a.model),j=function(a,b){return o.observe(a,b).notify(a,b)},p=function(b,c){var d,e;if(c.prefill===!1)return;return d=b.hook.detectOtherInterface(b.raw),e=b.hook.detectInterface(b.raw),b.hook.setHandler(b.raw,e,a.model.get(d)),b.set(d,b)},h=function(a,b){var d,e,f,g;return e=b.bind,e==="syncWith"?d=j:d=o[e],g={triggerOnBind:b.triggerOnBind},f=new c(a),p(f,b),d.call(o,f,g)},i=function(a,b,c){if(!a.length||!c.ignoreEmpty)throw new Error("No matching element found\nfor selector "+b+"!")},l=function(b,c){var d,e,f;return e=c.attribute,f="["+e+"="+b+"]",d=a.$(f),i(d,f,c),d},s=[];for(q=0,r=b.length;q<r;q++)k=b[q],m=n[k],g=l(k,m),s.push(h(g,m));return s}}),b});